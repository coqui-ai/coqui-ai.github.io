{"version":3,"sources":["webpack:///./node_modules/gatsby/node_modules/core-js/internals/is-array-iterator-method.js","webpack:///./src/layouts/Voices/components/Voice.tsx","webpack:///./src/pages/voices/.tsx","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es.object.from-entries.js","webpack:///./node_modules/gatsby/node_modules/core-js/internals/iterate.js","webpack:///./src/layouts/Auth/components/SignInForm.tsx","webpack:///./node_modules/gatsby/node_modules/core-js/internals/iterators.js","webpack:///./src/layouts/Auth/components/registration/AcceptTerms.tsx","webpack:///./src/layouts/Auth/components/registration/CompleteProfile.tsx","webpack:///./src/components/RequireAuth.tsx","webpack:///./node_modules/gatsby/node_modules/core-js/internals/iterator-close.js","webpack:///./node_modules/gatsby/node_modules/core-js/internals/get-iterator-method.js","webpack:///./node_modules/gatsby/node_modules/core-js/internals/create-property.js","webpack:///./node_modules/gatsby/node_modules/core-js/internals/get-iterator.js"],"names":["wellKnownSymbol","Iterators","ITERATOR","ArrayPrototype","Array","prototype","module","exports","it","undefined","VOICE","gql","CREATE_SAMPLE","Voice","id","useQuery","variables","voice","data","loading","error","useMutation","createSample","createSampleStatus","JSON","stringify","name","initialValues","text","speed","validate","values","errors","forEach","k","onSubmit","voice_id","htmlFor","placeholder","as","value","type","VoicePage","useEffect","consentedToGoogleAnalytics","Root","hasSkipNav","SEO","RequireAuth","$","iterate","createProperty","target","stat","fromEntries","iterable","obj","v","AS_ENTRIES","anObject","isArrayIteratorMethod","toLength","bind","getIterator","getIteratorMethod","iteratorClose","Result","stopped","result","this","unboundFunction","options","iterator","iterFn","index","length","next","step","that","IS_ITERATOR","INTERRUPTED","fn","stop","condition","callFn","TypeError","call","done","SignInForm","user","useAuth","useLoginEffect","login","logout","useLogoutEffect","onClick","username","password","ACCEPT_TERMS","AcceptTerms","acceptTerms","useState","isChecked","setChecked","checked","onChange","e","disabled","UPDATE_PROFILE","CompleteProfile","profile","updateProfile","personal_name","organization_name","formik","then","setStatus","Object","map","field","join","touched","status","__all__","ProfileContext","React","createContext","children","useProfile","terms_accepted","Provider","kind","innerResult","innerError","classof","toPropertyKey","definePropertyModule","createPropertyDescriptor","object","key","propertyKey","f","usingIterator","iteratorMethod","arguments","String"],"mappings":"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","file":"component---src-pages-voices-[id]-tsx-561f44515bd5d990b1d8.js","sourcesContent":["var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","/**\n * Copyright Coqui GmbH\n *\n * Use of this source code is governed under the Apache License, Version 2.0\n * found at http://www.apache.org/licenses/LICENSE-2.0.\n */\n\nimport React from 'react';\nimport { useQuery, gql, useMutation } from '@apollo/client';\nimport { Link } from '@reach/router';\nimport { Field, Form, Formik } from 'formik';\n\nconst VOICE = gql`\n  query voice($id: String!) {\n    voice(id: $id) {\n      id\n      name\n    }\n  }\n`;\n\nconst CREATE_SAMPLE = gql`\n  mutation createSample($name: String!, $voice_id: String!, $text: String!, $speed: String!) {\n    createSample(name: $name, voice_id: $voice_id, text: $text, speed: $speed) {\n      errors {\n        field\n        errors\n      }\n      sample {\n        id\n        name\n        created_at\n        voice_id\n        audio\n      }\n    }\n  }\n`;\n\nexport const Voice: React.FC = ({ id }) => {\n  const { data: voice, loading, error } = useQuery(VOICE, { variables: { id } });\n  const [createSample, createSampleStatus] = useMutation(CREATE_SAMPLE);\n\n  if (loading) return 'loading';\n  if (error) return <pre>{JSON.stringify(error)}</pre>;\n\n  return (\n    <div>\n      <pre>{JSON.stringify([createSampleStatus.data, createSampleStatus.error])}</pre>\n      my voice {voice.voice.name}\n      <Formik\n        initialValues={{\n          name: '',\n          text: '',\n          speed: '1'\n        }}\n        validate={values => {\n          const errors = {};\n\n          ['name', 'text'].forEach(k => {\n            if (!values[k]) errors[k] = 'Required.';\n          });\n\n          return errors;\n        }}\n        onSubmit={values => {\n          createSample({\n            variables: {\n              ...values,\n              voice_id: voice.voice.id\n            }\n          });\n          // todo: show errors\n        }}\n      >\n        <Form>\n          <label htmlFor=\"name\">Name your audio</label>\n          <Field id=\"name\" name=\"name\" placeholder=\"\" />\n\n          <label htmlFor=\"text\">Text</label>\n          <Field id=\"text\" name=\"text\" as=\"textarea\" placeholder=\"\" />\n\n          <label htmlFor=\"speed\">Speed</label>\n          <Field id=\"speed\" name=\"speed\" as=\"select\" placeholder=\"\">\n            <option value=\"0.5\">0.5</option>\n            <option value=\"1\">1</option>\n            <option value=\"2\">2</option>\n          </Field>\n\n          <button type=\"submit\">Submit</button>\n        </Form>\n      </Formik>\n    </div>\n  );\n};\n","/**\n * Copyright Coqui GmbH\n *\n * Use of this source code is governed under the Apache License, Version 2.0\n * found at http://www.apache.org/licenses/LICENSE-2.0.\n */\n\nimport React, { useEffect } from 'react';\n// import navs from '../nav/blog';\nimport SEO from 'components/SEO';\nimport RootLayout from 'layouts/Root';\n// import { graphql, useStaticQuery } from 'gatsby';\nimport GogleAnalyticsCookieConsent from 'components/Cookies';\nimport { consentedToGoogleAnalytics } from 'utils/GoogleAnalytics';\nimport { RequireAuth } from 'components/RequireAuth';\nimport { Voice } from 'layouts/Voices/components/Voice';\n\nconst VoicePage: React.FC = ({ id }) => {\n  useEffect(() => {\n    consentedToGoogleAnalytics();\n  });\n\n  return (\n    <RootLayout hasSkipNav={false}>\n      <SEO />\n      <RequireAuth>\n        <Voice id={id} />\n      </RequireAuth>\n\n      <GogleAnalyticsCookieConsent />\n    </RootLayout>\n  );\n};\n\nexport default VoicePage;\n","var $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar createProperty = require('../internals/create-property');\n\n// `Object.fromEntries` method\n// https://github.com/tc39/proposal-object-from-entries\n$({ target: 'Object', stat: true }, {\n  fromEntries: function fromEntries(iterable) {\n    var obj = {};\n    iterate(iterable, function (k, v) {\n      createProperty(obj, k, v);\n    }, { AS_ENTRIES: true });\n    return obj;\n  }\n});\n","var anObject = require('../internals/an-object');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that, 1 + AS_ENTRIES + INTERRUPTED);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = toLength(iterable.length); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && result instanceof Result) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = iterator.next;\n  while (!(step = next.call(iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && result instanceof Result) return result;\n  } return new Result(false);\n};\n","/**\n * Copyright Coqui GmbH\n *\n * Use of this source code is governed under the Apache License, Version 2.0\n * found at http://www.apache.org/licenses/LICENSE-2.0.\n */\n\nimport React from 'react';\nimport { useAuth, useLoginEffect, useLogoutEffect } from '../../../../utils/auth';\nimport { Formik, Field, Form } from 'formik';\n\nexport const SignInForm = () => {\n  const user = useAuth();\n  const [login, { data, loading, error }] = useLoginEffect();\n  const [logout] = useLogoutEffect();\n\n  if (user)\n    return (\n      <>\n        already logged in\n        <button onClick={() => logout()}>sign out</button>\n      </>\n    );\n\n  if (error) return 'error ' + error;\n  if (loading) return 'loading ' + loading;\n  if (data) return 'data ' + data;\n\n  return (\n    <Formik\n      initialValues={{\n        username: '',\n        password: ''\n      }}\n      onSubmit={values => {\n        login(values.username, values.password);\n      }}\n    >\n      <Form>\n        <label htmlFor=\"username\">Username</label>\n        <Field id=\"username\" name=\"username\" placeholder=\"\" />\n\n        <label htmlFor=\"password\">Password</label>\n        <Field id=\"password\" name=\"password\" type=\"password\" placeholder=\"\" />\n\n        <button type=\"submit\">Sign In</button>\n      </Form>\n    </Formik>\n  );\n};\n","module.exports = {};\n","/**\n * Copyright Coqui GmbH\n *\n * Use of this source code is governed under the Apache License, Version 2.0\n * found at http://www.apache.org/licenses/LICENSE-2.0.\n */\n\nimport React, { useState } from 'react';\nimport { useQuery, gql, useMutation } from '@apollo/client';\nimport { RequireAuth, ProfileContext } from './RequireAuth';\n\nconst ACCEPT_TERMS = gql`\n  mutation {\n    updateProfile(terms_accepted: true) {\n      errors {\n        field\n        errors\n      }\n      profile {\n        terms_accepted\n      }\n    }\n  }\n`;\n\nexport const AcceptTerms: React.FC = () => {\n  const [acceptTerms, { loading, error }] = useMutation(ACCEPT_TERMS);\n  const [isChecked, setChecked] = useState(false);\n\n  return (\n    <div>\n      terms terms\n      <input type=\"checkbox\" checked={isChecked} onChange={e => setChecked(e.target.checked)} />\n      <button disabled={!isChecked} onClick={acceptTerms}>\n        okay\n      </button>\n    </div>\n  );\n};\n","/**\n * Copyright Coqui GmbH\n *\n * Use of this source code is governed under the Apache License, Version 2.0\n * found at http://www.apache.org/licenses/LICENSE-2.0.\n */\n\nimport React from 'react';\nimport { Formik, Field, Form } from 'formik';\nimport { useQuery, gql, useMutation } from '@apollo/client';\nimport { RequireAuth, ProfileContext } from './RequireAuth';\n\nconst UPDATE_PROFILE = gql`\n  mutation updateProfile($personal_name: String!, $organization_name: String!) {\n    updateProfile(personal_name: $personal_name, organization_name: $organization_name) {\n      errors {\n        field\n        errors\n      }\n      profile {\n        organization_name\n        personal_name\n        terms_accepted\n      }\n    }\n  }\n`;\n\nexport const CompleteProfile = ({ profile }) => {\n  const [updateProfile, { data, loading, error }] = useMutation(UPDATE_PROFILE);\n\n  return (\n    <Formik\n      initialValues={{\n        personal_name: profile.personal_name,\n        organization_name: profile.organization_name\n      }}\n      validate={values => {\n        const errors = {};\n\n        ['personal_name', 'organization_name'].forEach(k => {\n          if (!values[k]) errors[k] = 'Required.';\n        });\n\n        return errors;\n      }}\n      onSubmit={({ personal_name, organization_name }, formik) =>\n        updateProfile({ variables: { personal_name, organization_name } }).then(({ data }) => {\n          if (data.errors) {\n            formik.setStatus(\n              Object.fromEntries(data.errors.map(({ field, errors }) => [field, errors.join(' ')]))\n            );\n          } else {\n            return data;\n          }\n        })\n      }\n    >\n      {({ errors, touched, status }) => (\n        <Form>\n          {status?.__all__ ? <div>{status.__all__}</div> : null}\n\n          <label htmlFor=\"personal_name\">Enter your name here:</label>\n          <Field id=\"personal_name\" name=\"personal_name\" type=\"personal_name\" placeholder=\"\" />\n          {errors.personal_name && touched.personal_name ? <div>{errors.personal_name}</div> : null}\n          {status?.personal_name ? <div>{status.personal_name}</div> : null}\n\n          <label htmlFor=\"organization_name\">Name of organization:</label>\n          <Field\n            id=\"organization_name\"\n            name=\"organization_name\"\n            type=\"organization_name\"\n            placeholder=\"\"\n          />\n          {errors.organization_name && touched.organization_name ? (\n            <div>{errors.organization_name}</div>\n          ) : null}\n          {status?.organization_name ? <div>{status.organization_name}</div> : null}\n\n          <button type=\"submit\">Sign Up & Login</button>\n        </Form>\n      )}\n    </Formik>\n  );\n};\n","/**\n * Copyright Coqui GmbH\n *\n * Use of this source code is governed under the Apache License, Version 2.0\n * found at http://www.apache.org/licenses/LICENSE-2.0.\n */\n\nimport React from 'react';\nimport { useProfile, Profile } from '../../utils/auth';\nimport { AcceptTerms } from 'layouts/Auth/components/registration/AcceptTerms';\nimport { CompleteProfile } from 'layouts/Auth/components/registration/CompleteProfile';\nimport { VerifyEmail } from 'layouts/Auth/components/registration/VerifyEmail';\nimport { SignInForm } from 'layouts/Auth/components/SignInForm';\n\nexport const ProfileContext = React.createContext<Profile>(null);\n\nexport const RequireAuth = ({ children }) => {\n  const { data: profile, loading, error } = useProfile();\n\n  if (loading) return 'Loading...';\n\n  if (error || !profile) {\n    return <SignInForm />;\n  } // TODO: error-specific behaviour?\n\n  // if (!profile.email_validated) {\n  //   return <VerifyEmail />;\n  // }\n\n  if (!profile.personal_name || !profile.organization_name) {\n    return <CompleteProfile profile={profile} />;\n  }\n\n  if (!profile.terms_accepted) {\n    return <AcceptTerms />;\n  }\n\n  return <ProfileContext.Provider value={profile}>{children}</ProfileContext.Provider>;\n};\n","var anObject = require('../internals/an-object');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = iterator['return'];\n    if (innerResult === undefined) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = innerResult.call(iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","var anObject = require('../internals/an-object');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nmodule.exports = function (it, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(it) : usingIterator;\n  if (typeof iteratorMethod != 'function') {\n    throw TypeError(String(it) + ' is not iterable');\n  } return anObject(iteratorMethod.call(it));\n};\n"],"sourceRoot":""}