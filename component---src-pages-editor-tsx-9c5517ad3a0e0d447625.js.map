{"version":3,"sources":["webpack:///./src/layouts/Editor/index.tsx","webpack:///./src/pages/editor.tsx"],"names":["ProjectListLayout","useState","projectName","setProjectName","projectDesc","setProjectDesc","useQuery","queries","projects","data","loading","useMutation","mutations","update","cache","evict","id","fieldName","createProject","createdProject","creating","error","useEffect","project","navigate","ClientSide","RequireEditorAccess","Breadcrumb","items","map","proj","key","to","name","description","onSubmit","e","preventDefault","variables","value","onChange","target","EditorPage","project_id","Root","hasSkipNav","SEO","title"],"mappings":"oYAgGeA,EA5EW,WACxB,MAAsCC,mBAAS,IAAxCC,EAAP,KAAoBC,EAApB,KACA,EAAsCF,mBAAS,IAAxCG,EAAP,KAAoBC,EAApB,KAEA,EAAoCC,YAASC,KAA/BC,EAAd,EAAQC,KACR,GADA,EAAwBC,QACqCC,YAAYC,IAA0B,CACjGC,OAAQ,SAAAC,GACNA,EAAMC,MAAM,CACVC,GAAI,aACJC,UAAW,iBAJVC,EAAP,YAAwBC,EAAxB,EAAwBA,eAAgBC,EAAxC,EAAwCA,SAAxC,EAAkDC,MASlDC,qBAAU,WAAM,QACVH,SAAJ,UAAIA,EAAgBD,qBAApB,iBAAI,EAA+BK,eAAnC,OAAI,EAAwCP,IAC1CQ,YAAS,mBAAmBL,EAAeD,cAAcK,QAAQP,GAAzD,OAET,CAACG,IAiBJ,OACE,kBAACM,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,MAAO,CACL,CAAC,cAAe,eAHtB,eAOE,4BACGpB,GAAYA,EAASA,SAASqB,KAAI,SAAAC,GAAI,OACrC,qBAAmCC,IAAKD,EAAKd,IAC3C,kBAAC,IAAD,CAAMgB,GAAE,mBAAqBF,EAAKd,IAC/Bc,EAAKG,KADR,MACiBH,EAAKI,kBAK5B,6BACA,0BACEC,SAAU,SAAAC,GACRA,EAAEC,kBAnCLnC,IAAgBE,GAIrBc,EAAc,CACZoB,UAAW,CACTL,KAAM/B,EACNgC,YAAa9B,OAgCX,iDACA,kBAAC,IAAD,KACE,kBAAC,IAAD,aACA,kBAAC,IAAD,CAAOmC,MAAOrC,EAAasC,SAAU,SAAAJ,GAAC,OAAIjC,EAAeiC,EAAEK,OAAOF,WAEpE,kBAAC,IAAD,KACE,kBAAC,IAAD,oBACA,kBAAC,IAAD,CAAOA,MAAOnC,EAAaoC,SAAU,SAAAJ,GAAC,OAAI/B,EAAe+B,EAAEK,OAAOF,WAEpE,kBAAC,IAAD,CAAQ7B,QAASU,GAAjB,sB,wBClEKsB,UAVI,SAAC,GAAmB,EAAjBC,WACpB,OACE,kBAACC,EAAA,EAAD,CAAYC,YAAY,GACtB,kBAACC,EAAA,EAAD,CAAKC,MAAM,gBACX,kBAAC,EAAD,MACA,kBAAC,IAAD","file":"component---src-pages-editor-tsx-9c5517ad3a0e0d447625.js","sourcesContent":["/**\n * Copyright Coqui GmbH\n *\n * Use of this source code is governed under the Apache License, Version 2.0\n * found at http://www.apache.org/licenses/LICENSE-2.0.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport { useQuery, useMutation } from '@apollo/client';\nimport { Link, navigate } from 'gatsby';\nimport { css } from 'styled-components';\nimport { Field, Input, Label } from '@zendeskgarden/react-forms';\nimport { Submit } from 'layouts/Root/components/Forms';\nimport { mediaQuery } from '@zendeskgarden/react-theming';\nimport RequireEditorAccess from './components/RequireEditorAccess';\nimport ClientSide from './components/ClientSide';\nimport Breadcrumb from './components/Breadcrumb';\nimport * as mutations from './components/Mutations';\nimport * as queries from './components/Queries';\n\nconst ProjectListLayout = () => {\n  const [projectName, setProjectName] = useState('');\n  const [projectDesc, setProjectDesc] = useState('');\n\n  const { data: projects, loading } = useQuery(queries.PROJECTS);\n  const [createProject, { createdProject, creating, error }] = useMutation(mutations.CREATE_PROJECT, {\n    update: cache => {\n      cache.evict({\n        id: 'ROOT_QUERY',\n        fieldName: 'projects'\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (createdProject?.createProject?.project?.id) {\n      navigate(`/editor/project/${createdProject.createProject.project.id}/`);\n    }\n  }, [createdProject]);\n\n  const submitForm = () => {\n    if (!projectName || !projectDesc) {\n      return false;\n    }\n\n    createProject({\n      variables: {\n        name: projectName,\n        description: projectDesc,\n      }\n    });\n\n    return true;\n  };\n\n  return (\n    <ClientSide>\n      <RequireEditorAccess>\n        <Breadcrumb\n          items={[\n            ['My Projects', '/editor/'],\n          ]}\n        />\n        Project list\n        <ul>\n          {projects && projects.projects.map(proj => (\n            <li css=\"list-style-type: circle;\" key={proj.id}>\n              <Link to={`/editor/project/${proj.id}`}>\n                {proj.name} - {proj.description}\n              </Link>\n            </li>\n          ))}\n        </ul>\n        <hr/>\n        <form\n          onSubmit={e => {\n            e.preventDefault();\n            submitForm();\n          }}\n        >\n          <p>Create new project</p>\n          <Field>\n            <Label>Name</Label>\n            <Input value={projectName} onChange={e => setProjectName(e.target.value)}/>\n          </Field>\n          <Field>\n            <Label>Description</Label>\n            <Input value={projectDesc} onChange={e => setProjectDesc(e.target.value)}/>\n          </Field>\n          <Submit loading={creating}>Create project</Submit>\n        </form>\n      </RequireEditorAccess>\n    </ClientSide>\n  );\n};\n\nexport default ProjectListLayout;\n","/**\n * Copyright Coqui GmbH\n *\n * Use of this source code is governed under the Apache License, Version 2.0\n * found at http://www.apache.org/licenses/LICENSE-2.0.\n */\n\nimport React, { useEffect, useState } from 'react';\nimport RootLayout from 'layouts/Root';\nimport ProjectListLayout from 'layouts/Editor';\nimport GogleAnalyticsCookieConsent from 'components/Cookies';\nimport SEO from 'components/SEO';\n\nconst EditorPage = ({ project_id }) => {\n  return (\n    <RootLayout hasSkipNav={false}>\n      <SEO title=\"My Projects\" />\n      <ProjectListLayout/>\n      <GogleAnalyticsCookieConsent />\n    </RootLayout>\n  );\n};\n\nexport default EditorPage;\n"],"sourceRoot":""}